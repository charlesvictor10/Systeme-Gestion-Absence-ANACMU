<!-- Content Header (Page header) -->
<section class="content-header">
  <h1>
    Page de validation d'une demande d'absence
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-dashboard"></i> Accueil</a></li>
    <li><a href="#">Demandes</a></li>
    <li class="active">Validation demandes</li>
  </ol>
</section>

<!-- Main content -->
<section class="content">
  <div class="box box-default">
    <div class="box-header with-border">
      <h3 class="box-title">Validation demande n° {{demandePermission.id}}</h3>
      <div class="box-tools pull-right">
        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
      </div>
    </div>

    <!-- /.box-header -->
    <div class="box-body">
      <div class="row">
        <div class="col-md-6">
          <div class="box-body">
            <div class="box-footer no-padding">
              <ul class="nav nav-stacked">
                <li><a>Agent <span class="pull-right badge bg-aqua">{{demandePermission.absence.agent.prenom}} {{demandePermission.absence.agent.nom}}</span></a></li>
                <li><a>Type d'absence <span class="pull-right badge bg-aqua">{{demandePermission.absence.typeAbsence}}</span></a></li>
                <li><a>Date de demande <span class="pull-right badge bg-aqua">{{demandePermission.dateDemande|date:'dd/MM/yyyy'}}</span></a></li>
                <li><a>Motif <span class="pull-right badge bg-aqua">{{demandePermission.absence.motif}}</span></a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="box-body">
            <div class="box-footer no-padding">
              <ul class="nav nav-stacked">
                <li><a>Date début <span class="pull-right badge bg-aqua">{{demandePermission.absence.dateDebutAbsence|date:'dd/MM/yyyy'}}</span></a></li>
                <li><a>Date fin <span class="pull-right badge bg-aqua">{{demandePermission.absence.dateFinAbsence|date:'dd/MM/yyyy'}}</span></a></li>
                <li><a>Durée d'absence <span class="pull-right badge bg-aqua">{{demandePermission.absence.nbJourAbsence}}</span></a></li>
                <li><a>Etat demande <span class="pull-right badge bg-aqua">{{demandePermission.etatDemande}}</span></a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="box box-default">
    <div class="box-header with-border">
      <h3 class="box-title">Liste des validations précédentes</h3>
      <div class="box-tools pull-right">
        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
      </div>
    </div>

    <!-- /.box-header -->
    <div class="box-body">
      <div class="row">
        <div class="box-body">
          <table id="example1" class="table table-bordered table-striped">
            <thead>
            <tr>
              <th>N° demande</th>
              <th>Date validation</th>
              <th>Note</th>
              <th>Validateur</th>
              <th>Etat validation</th>
            </tr>
            </thead>
            <tbody>
              <tr *ngFor="let validationDemande of validationDemandes">
                <td>{{validationDemande.demandePermissionAbsence.id}}</td>
                <td>{{validationDemande.dateValidation|date:'dd/MM/yyyy'}}</td>
                <td>{{validationDemande.observations}}</td>
                <td>{{validationDemande.validateur.prenom}} {{validationDemande.validateur.nom}}</td>
                <td>{{validationDemande.etatValidation}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="box box-default">
    <div class="box-header with-border">
      <h3 class="box-title">Validation de la demande</h3>
    </div>
    <!-- /.box-header -->
    <div class="box-body">
      <form #f="ngForm" (ngSubmit)="onSaveValidation(f.value)">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label>Date validation</label>
              <div class="input-group date">
                <div class="input-group-addon">
                  <i class="fa fa-calendar"></i>
                </div>
                <input type="Date" class="form-control pull-right" name="dateValidation" ngModel>
              </div>
            </div>
            <div class="form-group">
              <div class="pretty p-icon p-round">
                <input type="radio" name="etatValidation" value="Accepter" ngModel>
                <div class="state p-success">
                  <i class="icon mdi mdi-check"></i>
                  <label>Accepter</label>
                </div>
              </div>
              <br>
              <div class="pretty p-icon p-round">
                <input type="radio" name="etatValidation" value="Refuser" ngModel>
                <div class="state p-danger">
                  <i class="icon mdi mdi-check"></i>
                  <label>Refuser</label>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Observations</label>
              <textarea class="form-control" rows="3" name="observations" ngModel></textarea>
            </div>
          </div>
        </div>
        <div class="box-footer">
          <button type="submit" class="btn btn-primary">Valider</button>
          <button type="reset" class="btn btn-danger pull-right">Annuler</button>
        </div>
      </form>
    </div>
  </div>
</section>
